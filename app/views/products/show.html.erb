<div class="container">
  <div class="row">
    <div class="col-md-6">
      <% if @product.image.attached? %>
        <%= image_tag @product.image, class: 'img-fluid rounded shadow', alt: @product.name %>
      <% else %>
        <div class="bg-light d-flex align-items-center justify-content-center rounded shadow" style="height: 400px;">
          <i class="bi bi-box-seam display-1 text-secondary"></i>
        </div>
      <% end %>
    </div>
    
    <div class="col-md-6">
      <h1 class="display-5 fw-bold"><%= @product.name %></h1>

      <div class="card mt-3 border-0 shadow-sm">
        <div class="card-body">
          <h3 class="text-primary fw-bold"><%= @product.formatted_price %></h3>
          
          <hr>
          
          <p class="mt-3"><strong>Description:</strong></p>
          <p class="text-muted"><%= @product.description %></p>

          <p><strong>Quantity Available:</strong> <span class="badge bg-secondary"><%= @product.quantity %></span></p>

          <p>
            <% if @product.in_stock? %>
              <span class="badge bg-success fs-6">In Stock</span>
            <% else %>
              <span class="badge bg-danger fs-6">Out of Stock</span>
            <% end %>
          </p>

         <% if @product.in_stock? %>
  <%= button_to cart_items_path(product_id: @product.id), method: :post, class: 'btn btn-success btn-lg w-100 mb-2' do %>
    <i class="bi bi-cart-plus"></i> Add to Cart
  <% end %>
<% end %>
        </div>
      </div>

      <div class="mt-3 d-flex gap-2">
        <%= link_to edit_product_path(@product), class: 'btn btn-warning' do %>
          <i class="bi bi-pencil"></i> Edit
        <% end %>
        <%= link_to products_path, class: 'btn btn-secondary' do %>
          <i class="bi bi-arrow-left"></i> Back to Products
        <% end %>
        <%= button_to product_path(@product), method: :delete, data: { turbo_confirm: 'Are you sure?' }, class: 'btn btn-danger' do %>
          <i class="bi bi-trash"></i> Delete
        <% end %>
      </div>
    </div>
  </div>
</div>